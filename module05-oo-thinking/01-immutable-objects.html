<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mutable &amp; Immutable Objects | CPCS203 Module 05</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        :root {
            --primary-color:#2563eb; --primary-light:#3b82f6; --primary-dark:#1d4ed8;
            --secondary-color:#7c3aed; --success-color:#059669; --warning-color:#d97706;
            --danger-color:#dc2626; --dark-color:#1f2937; --light-color:#f3f4f6;
            --gray-color:#6b7280; --teal-color:#0d9488;
        }
        body { font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif; line-height:1.8; color:var(--dark-color); background:linear-gradient(135deg,#1e40af 0%,#3b82f6 50%,#7c3aed 100%); min-height:100vh; padding:20px; }
        .container { max-width:1000px; margin:0 auto; background:white; border-radius:20px; box-shadow:0 25px 50px -12px rgba(0,0,0,.25); overflow:hidden; }
        .header { background:linear-gradient(135deg,var(--primary-color),var(--secondary-color)); color:white; padding:45px 40px; text-align:center; }
        .header .module-badge { display:inline-block; background:rgba(255,255,255,.2); border:2px solid rgba(255,255,255,.4); border-radius:30px; padding:6px 20px; font-size:.85rem; letter-spacing:2px; text-transform:uppercase; margin-bottom:18px; }
        .header h1 { font-size:2.6rem; margin-bottom:10px; text-shadow:2px 2px 4px rgba(0,0,0,.2); }
        .header .subtitle { font-size:1.15rem; opacity:.9; margin-bottom:20px; }
        .header .topics-pill-row { display:flex; justify-content:center; flex-wrap:wrap; gap:10px; margin-top:10px; }
        .topic-pill { background:rgba(255,255,255,.18); border:1px solid rgba(255,255,255,.35); border-radius:20px; padding:5px 16px; font-size:.82rem; }
        .toc { background:linear-gradient(135deg,#f0f4ff,#e8ecff); border-left:5px solid var(--primary-color); margin:30px 40px; border-radius:0 15px 15px 0; padding:25px 30px; }
        .toc-title { font-size:1.1rem; font-weight:bold; color:var(--primary-color); margin-bottom:14px; }
        .toc ol { padding-left:22px; }
        .toc li { padding:4px 0; }
        .toc a { color:var(--primary-dark); text-decoration:none; font-size:.95rem; }
        .toc a:hover { text-decoration:underline; }
        .content { padding:10px 40px 40px; }
        .section { margin-bottom:60px; }
        .section-title { font-size:1.8rem; color:var(--primary-color); border-bottom:3px solid var(--primary-color); padding-bottom:10px; margin-bottom:25px; display:flex; align-items:center; gap:12px; }
        .section-number { background:var(--primary-color); color:white; width:42px; height:42px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:1.2rem; font-weight:bold; flex-shrink:0; }
        .narrative { background:linear-gradient(135deg,#f0f4ff,#e8ecff); border-left:5px solid var(--primary-color); padding:22px 28px; margin:20px 0; border-radius:0 15px 15px 0; font-size:1.03rem; line-height:2; }
        .narrative p { margin-bottom:12px; } .narrative p:last-child { margin-bottom:0; }
        .key-concept { background:linear-gradient(135deg,#fef3c7,#fde68a); border-left:5px solid var(--warning-color); padding:20px 25px; margin:20px 0; border-radius:0 10px 10px 0; }
        .key-concept-title { font-weight:bold; color:var(--warning-color); margin-bottom:10px; font-size:1.05rem; }
        .important-box { background:linear-gradient(135deg,#fee2e2,#fecaca); border-left:5px solid var(--danger-color); padding:20px 25px; margin:20px 0; border-radius:0 10px 10px 0; }
        .important-box-title { font-weight:bold; color:var(--danger-color); margin-bottom:10px; font-size:1.05rem; }
        .info-box { background:linear-gradient(135deg,#dbeafe,#bfdbfe); border-left:5px solid var(--primary-color); padding:20px 25px; margin:20px 0; border-radius:0 10px 10px 0; }
        .info-box-title { font-weight:bold; color:var(--primary-color); margin-bottom:10px; font-size:1.05rem; }
        .success-box { background:linear-gradient(135deg,#d1fae5,#a7f3d0); border-left:5px solid var(--success-color); padding:20px 25px; margin:20px 0; border-radius:0 10px 10px 0; }
        .success-box-title { font-weight:bold; color:var(--success-color); margin-bottom:10px; font-size:1.05rem; }
        .analogy-box { background:linear-gradient(135deg,#f0fdf4,#dcfce7); border:2px dashed var(--success-color); border-radius:15px; padding:25px; margin:20px 0; }
        .analogy-title { font-weight:bold; color:var(--success-color); font-size:1.05rem; margin-bottom:10px; }
        .code-block { background:#1e1e1e; color:#d4d4d4; padding:22px; border-radius:0 10px 10px 10px; margin:0 0 20px; overflow-x:auto; font-family:'Consolas','Monaco',monospace; font-size:.92rem; line-height:1.7; white-space:pre; }
        .code-block .keyword{color:#569cd6} .code-block .type{color:#4ec9b0} .code-block .string{color:#ce9178} .code-block .number{color:#b5cea8} .code-block .comment{color:#6a9955;font-style:italic} .code-block .method{color:#dcdcaa} .code-block .cls{color:#4ec9b0}
        .cards-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:20px; margin:25px 0; }
        .card { background:white; border-radius:15px; padding:25px; border:2px solid #e2e8f0; box-shadow:0 4px 10px rgba(0,0,0,.05); transition:transform .2s,box-shadow .2s; }
        .card:hover { transform:translateY(-5px); box-shadow:0 10px 25px rgba(0,0,0,.1); }
        .card-icon { font-size:2.4rem; margin-bottom:12px; }
        .card-title { font-size:1.15rem; font-weight:bold; margin-bottom:8px; }
        .card-desc { color:var(--gray-color); font-size:.93rem; line-height:1.6; }
        .dialogue { margin:20px 0; display:flex; flex-direction:column; gap:12px; }
        .dialogue-item { display:flex; gap:14px; align-items:flex-start; }
        .dialogue-avatar { width:44px; height:44px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:1.4rem; flex-shrink:0; }
        .avatar-prof { background:linear-gradient(135deg,#2563eb,#7c3aed); }
        .avatar-student { background:linear-gradient(135deg,#059669,#0d9488); }
        .dialogue-bubble { background:#f8fafc; border-radius:0 15px 15px 15px; padding:14px 18px; border:2px solid #e2e8f0; flex:1; font-size:.95rem; }
        .dialogue-item.professor .dialogue-bubble { background:linear-gradient(135deg,#eff6ff,#dbeafe); border-color:#bfdbfe; border-radius:15px 15px 15px 0; }
        .dialogue-item.student .dialogue-bubble { background:linear-gradient(135deg,#f0fdf4,#dcfce7); border-color:#bbf7d0; }
        .dialogue-speaker { font-size:.75rem; font-weight:bold; text-transform:uppercase; letter-spacing:1px; margin-bottom:5px; }
        .dialogue-item.professor .dialogue-speaker { color:var(--primary-color); }
        .dialogue-item.student .dialogue-speaker { color:var(--success-color); }
        .memory-vis { display:flex; justify-content:center; flex-wrap:wrap; gap:30px; margin:25px 0; }
        .mem-box { border-radius:12px; overflow:hidden; box-shadow:0 4px 15px rgba(0,0,0,.1); min-width:200px; border:3px solid; }
        .mem-header { padding:10px 16px; color:white; text-align:center; font-weight:bold; font-family:'Consolas',monospace; }
        .mem-body { background:white; padding:12px 16px; font-family:'Consolas',monospace; font-size:.88rem; }
        .mem-row { display:flex; justify-content:space-between; padding:4px 0; border-bottom:1px solid #f0f0f0; }
        .mem-row:last-child { border-bottom:none; }
        .mem-key { color:var(--gray-color); } .mem-value { color:var(--primary-dark); font-weight:bold; }
        .rules-list { display:flex; flex-direction:column; gap:14px; margin:20px 0; }
        .rule-item { display:flex; align-items:flex-start; gap:15px; background:#f8fafc; border-radius:12px; padding:18px 22px; border:2px solid #e2e8f0; }
        .rule-badge { background:linear-gradient(135deg,var(--primary-color),var(--secondary-color)); color:white; width:36px; height:36px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:.95rem; flex-shrink:0; }
        .rule-content { flex:1; }
        .rule-title { font-weight:bold; color:var(--primary-color); margin-bottom:4px; }
        .rule-desc { color:var(--gray-color); font-size:.93rem; }
        .hl-blue{color:#2563eb;font-weight:bold} .hl-purple{color:#7c3aed;font-weight:bold}
        .collapsible-code { margin:20px 0; }
        .code-header { background:#2d2d2d; color:#9cdcfe; padding:9px 15px; border-radius:10px 10px 0 0; display:flex; justify-content:space-between; align-items:center; font-family:'Consolas',monospace; font-size:.83rem; cursor:pointer; user-select:none; }
        .code-header .toggle-btn { background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.28); color:#9cdcfe; padding:3px 12px; border-radius:6px; cursor:pointer; font-size:.78rem; font-family:'Consolas',monospace; transition:background .2s; white-space:nowrap; }
        .code-header .toggle-btn:hover { background:rgba(255,255,255,.22); }
        .code-collapse { overflow:hidden; }
        .code-collapse.cc-hidden { display:none; }
        .collapsible-code .code-block { border-radius:0 0 10px 10px; margin:0; }
        .nav-buttons { display:flex; justify-content:space-between; padding:30px 40px; background:var(--light-color); border-top:2px solid #e5e7eb; }
        .nav-btn { padding:9px 16px; border-radius:10px; text-decoration:none; font-weight:bold; font-size:.8rem; white-space:nowrap; transition:transform .2s,box-shadow .2s; }
        .nav-btn:hover { transform:translateY(-2px); box-shadow:0 4px 12px rgba(0,0,0,.15); }
        .nav-btn.prev { background:white; color:var(--primary-color); border:2px solid var(--primary-color); }
        .nav-btn.next { background:linear-gradient(135deg,var(--primary-color),var(--secondary-color)); color:white; }
        .nav-btn.home { background:white; color:var(--secondary-color); border:2px solid var(--secondary-color); }
        @media(max-width:600px){ .header h1{font-size:1.8rem} .content{padding:10px 20px 30px} .toc{margin:20px} .nav-buttons{flex-direction:column;gap:12px} }

        .lang-switch {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.2s, box-shadow 0.2s;
            font-size: 0.95rem;
        }
        .lang-switch:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <!-- Language Switch -->
    <a href="01-immutable-objects-ar.html" class="lang-switch">&#127480;&#127462; Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</a>


<div class="container">

    <div class="nav-buttons">
        <a href="../module04-objects-and-classes/03-static-visibility-arrays.html" class="nav-btn prev">â† Module 04: Static &amp; Visibility</a>
        <a href="../index.html" class="nav-btn home">ğŸ  Home</a>
        <a href="02-object-relationships.html" class="nav-btn next">Part 2: Object Relationships â†’</a>
    </div>

    <div class="header">
        <div class="module-badge">CPCS203 &nbsp;Â·&nbsp; Module 05 &nbsp;Â·&nbsp; Part 1 of 3</div>
        <h1>ğŸ”’ Mutable &amp; Immutable Objects</h1>
        <p class="subtitle">Understanding when an object can â€” and cannot â€” be changed after creation</p>
        <div class="topics-pill-row">
            <span class="topic-pill">ğŸ”‘ Encapsulation Recap</span>
            <span class="topic-pill">ğŸ”„ Mutable Objects</span>
            <span class="topic-pill">ğŸ”’ Immutable Objects</span>
            <span class="topic-pill">ğŸ“‹ 3 Rules for Immutability</span>
            <span class="topic-pill">ğŸ›¡ï¸ Defensive Copy</span>
        </div>
    </div>

    <div class="toc">
        <div class="toc-title">ğŸ“‹ Table of Contents</div>
        <ol>
            <li><a href="#s1">The Two Pillars: Encapsulation &amp; Abstraction (Recap)</a></li>
            <li><a href="#s2">Mutable vs Immutable Objects â€” Step-by-Step Classroom Discussion</a></li>
            <li><a href="#s3">The Three Rules for an Immutable Class</a></li>
        </ol>
    </div>

    <div class="content">

        <!-- â•â• S1 â•â• -->
        <div class="section" id="s1">
            <div class="section-title"><div class="section-number">1</div>The Two Pillars: Encapsulation &amp; Abstraction</div>
            <div class="narrative">
                <p>Welcome, dear students! We have just finished studying <strong>Classes &amp; Objects</strong>. By now, our mindset has shifted â€” we have moved from <em>procedural thinking</em> to <em>object-oriented thinking</em>. We can identify objects, their properties (fields) and their behaviour (methods), express them in UML, and translate that UML into Java code.</p>
                <p>Before we dive into today's new material, let us quickly recall the <strong>two foundational pillars of OOP</strong> that we have already met.</p>
            </div>
            <div class="cards-grid">
                <div class="card" style="border-top:4px solid #2563eb;">
                    <div class="card-icon">ğŸ”’</div>
                    <div class="card-title" style="color:#2563eb;">Encapsulation</div>
                    <div class="card-desc"><strong>Hiding the internal state</strong> of an object from the outside world. All data fields are kept <code>private</code>; the outside can only interact through well-defined <code>public</code> methods (getters / setters).<br><br>Think of it as a medicine capsule â€” the contents are hidden inside; you only interact with the outer shell.</div>
                </div>
                <div class="card" style="border-top:4px solid #7c3aed;">
                    <div class="card-icon">ğŸ§©</div>
                    <div class="card-title" style="color:#7c3aed;">Abstraction</div>
                    <div class="card-desc"><strong>Separating implementation from usage.</strong> A user of a class does not need to know <em>how</em> it works internally â€” only <em>what</em> it does. The public interface (method signatures) is what matters.<br><br>Think of driving a car: you use the steering wheel and pedals without knowing the engine internals.</div>
                </div>
            </div>
            <div class="info-box">
                <div class="info-box-title">ğŸ“š Where to read more</div>
                Please revisit the Encapsulation and Abstraction sections in Module 04 (Objects &amp; Classes) for a deeper explanation and worked examples.
            </div>
        </div>

        <!-- â•â• S2 â•â• -->
        <div class="section" id="s2">
            <div class="section-title"><div class="section-number">2</div>Mutable vs Immutable Objects</div>
            <div class="narrative">
                <p>Every object we create is either <span class="hl-blue">mutable</span> or <span class="hl-purple">immutable</span>. Let us walk through a classroom discussion <strong>step by step</strong> â€” with the actual Java code at each stage so you can see exactly what changes.</p>
            </div>
            <div class="cards-grid">
                <div class="card" style="border-top:4px solid #059669;">
                    <div class="card-icon">ğŸ”„</div>
                    <div class="card-title" style="color:#059669;">Mutable Object</div>
                    <div class="card-desc">An object whose <strong>content CAN be changed</strong> after it has been created. Most Java objects (e.g., arrays, <code>StringBuilder</code>) are mutable by default.</div>
                </div>
                <div class="card" style="border-top:4px solid #dc2626;">
                    <div class="card-icon">ğŸ”’</div>
                    <div class="card-title" style="color:#dc2626;">Immutable Object</div>
                    <div class="card-desc">An object whose <strong>content CANNOT be changed</strong> once it is created. Classic Java example: <code>String</code>. Once a <code>String</code> is created, its characters are fixed.</div>
                </div>
            </div>

            <!-- Step 1 -->
            <div class="analogy-box" style="margin-top:30px;">
                <div class="analogy-title">ğŸ« Step 1 â€” The Professor Writes the First Class</div>
                <div class="dialogue">
                    <div class="dialogue-item professor">
                        <div class="dialogue-avatar avatar-prof">ğŸ‘¨â€ğŸ«</div>
                        <div class="dialogue-bubble"><div class="dialogue-speaker">Professor</div>I will create a simple <code>Student</code> class â€” it has <code>id</code>, <code>name</code>, and <code>age</code>. It has one constructor, getters, <em>and</em> setters. I will create an object and visualize it. <strong>Now, my question: is this object mutable or immutable?</strong> Can we change its content after it is created?</div>
                    </div>
                </div>
            </div>
            <div class="collapsible-code">
                <div class="code-header" onclick="toggleCode(this)"><span>ğŸ“„ Student.java &nbsp;â€”&nbsp; Version 1: has setters (MUTABLE)</span><button class="toggle-btn">â–¼ Show Code</button></div>
                <div class="code-collapse cc-hidden">
                    <div class="code-block"><span class="keyword">public class</span> <span class="cls">Student</span> {
    <span class="keyword">private int</span>    id;
    <span class="keyword">private</span> <span class="type">String</span> name;
    <span class="keyword">private int</span>    age;

    <span class="comment">// Constructor â€” sets all fields when the object is created</span>
    <span class="keyword">public</span> <span class="method">Student</span>(<span class="keyword">int</span> id, <span class="type">String</span> name, <span class="keyword">int</span> age) {
        <span class="keyword">this</span>.id   = id;
        <span class="keyword">this</span>.name = name;
        <span class="keyword">this</span>.age  = age;
    }

    <span class="comment">// Getters</span>
    <span class="keyword">public int</span>    <span class="method">getId</span>()   { <span class="keyword">return</span> id;   }
    <span class="keyword">public</span> <span class="type">String</span> <span class="method">getName</span>() { <span class="keyword">return</span> name; }
    <span class="keyword">public int</span>    <span class="method">getAge</span>()  { <span class="keyword">return</span> age;  }

    <span class="comment">// Setters â€” these allow modification AFTER creation â†’ MUTABLE</span>
    <span class="keyword">public void</span> <span class="method">setId</span>(<span class="keyword">int</span> id)       { <span class="keyword">this</span>.id   = id;   }
    <span class="keyword">public void</span> <span class="method">setName</span>(<span class="type">String</span> name) { <span class="keyword">this</span>.name = name; }
    <span class="keyword">public void</span> <span class="method">setAge</span>(<span class="keyword">int</span> age)     { <span class="keyword">this</span>.age  = age;  }
}</div>
                    <div class="code-block" style="border-radius:0;border-top:1px solid #333;"><span class="comment">// â”€â”€ TestMutableStudent.java â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="keyword">public class</span> <span class="cls">TestMutableStudent</span> {
    <span class="keyword">public static void</span> <span class="method">main</span>(<span class="type">String</span>[] args) {
        <span class="cls">Student</span> ali = <span class="keyword">new</span> <span class="cls">Student</span>(<span class="number">1001</span>, <span class="string">"Ali"</span>, <span class="number">20</span>);

        System.out.<span class="method">println</span>(<span class="string">"Before: age = "</span> + ali.<span class="method">getAge</span>());  <span class="comment">// 20</span>

        <span class="comment">// Modify through setter â€” object is MUTABLE âœï¸</span>
        ali.<span class="method">setAge</span>(<span class="number">21</span>);
        ali.<span class="method">setName</span>(<span class="string">"Ali Updated"</span>);

        System.out.<span class="method">println</span>(<span class="string">"After:  age = "</span> + ali.<span class="method">getAge</span>());  <span class="comment">// 21 â† changed!</span>
        System.out.<span class="method">println</span>(<span class="string">"After:  name= "</span> + ali.<span class="method">getName</span>()); <span class="comment">// "Ali Updated" â† changed!</span>
    }
}</span></div>
                </div>
            </div>
            <p style="font-weight:bold;color:var(--primary-color);margin:16px 0 10px;">ğŸ“¦ Object in memory â€” before and after <code>setAge(21)</code>:</p>
            <div class="memory-vis">
                <div class="mem-box" style="border-color:#2563eb;">
                    <div class="mem-header" style="background:linear-gradient(135deg,#2563eb,#7c3aed);">ali : Student &nbsp;(at creation)</div>
                    <div class="mem-body">
                        <div class="mem-row"><span class="mem-key">id</span><span class="mem-value">1001</span></div>
                        <div class="mem-row"><span class="mem-key">name</span><span class="mem-value">"Ali"</span></div>
                        <div class="mem-row"><span class="mem-key">age</span><span class="mem-value">20</span></div>
                    </div>
                </div>
                <div style="text-align:center;padding:0 10px;"><div style="font-size:2rem;">â†’ âœï¸ â†’</div><div style="font-size:.82rem;color:var(--gray-color);">ali.setAge(21)</div></div>
                <div class="mem-box" style="border-color:#059669;">
                    <div class="mem-header" style="background:linear-gradient(135deg,#059669,#0d9488);">ali : Student &nbsp;(after setter)</div>
                    <div class="mem-body">
                        <div class="mem-row"><span class="mem-key">id</span><span class="mem-value">1001</span></div>
                        <div class="mem-row"><span class="mem-key">name</span><span class="mem-value">"Ali"</span></div>
                        <div class="mem-row"><span class="mem-key">age</span><span class="mem-value" style="color:#dc2626;">21 âœï¸</span></div>
                    </div>
                </div>
            </div>

            <!-- Step 2 -->
            <div class="analogy-box" style="margin-top:30px;">
                <div class="analogy-title">ğŸ« Step 2 â€” "Remove the Setters!"</div>
                <div class="dialogue">
                    <div class="dialogue-item student"><div class="dialogue-avatar avatar-student">ğŸ™‹</div><div class="dialogue-bubble"><div class="dialogue-speaker">Student</div>Yes, Professor â€” we have setters, so we can change the fields. This object is <strong>mutable</strong>! To make it immutable, we should <strong>remove the setters</strong> â€” that way there is no way to modify the fields after the object is created.</div></div>
                    <div class="dialogue-item professor"><div class="dialogue-avatar avatar-prof">ğŸ‘¨â€ğŸ«</div><div class="dialogue-bubble"><div class="dialogue-speaker">Professor</div>Excellent! âœ… Let us remove the setters and see what happens. Now look at the class â€” and look at the <code>main</code>. Can we still change the object?</div></div>
                </div>
            </div>
            <div class="collapsible-code">
                <div class="code-header" onclick="toggleCode(this)"><span>ğŸ“„ Student.java &nbsp;â€”&nbsp; Version 2: setters removed</span><button class="toggle-btn">â–¼ Show Code</button></div>
                <div class="code-collapse cc-hidden">
                    <div class="code-block"><span class="keyword">public class</span> <span class="cls">Student</span> {
    <span class="keyword">private int</span>    id;
    <span class="keyword">private</span> <span class="type">String</span> name;
    <span class="keyword">private int</span>    age;

    <span class="keyword">public</span> <span class="method">Student</span>(<span class="keyword">int</span> id, <span class="type">String</span> name, <span class="keyword">int</span> age) {
        <span class="keyword">this</span>.id   = id;
        <span class="keyword">this</span>.name = name;
        <span class="keyword">this</span>.age  = age;
    }

    <span class="comment">// Getters only â€” NO setters anymore</span>
    <span class="keyword">public int</span>    <span class="method">getId</span>()   { <span class="keyword">return</span> id;   }
    <span class="keyword">public</span> <span class="type">String</span> <span class="method">getName</span>() { <span class="keyword">return</span> name; }
    <span class="keyword">public int</span>    <span class="method">getAge</span>()  { <span class="keyword">return</span> age;  }

    <span class="comment">// âœ… No setters â€” fields cannot be changed through methods</span>
}</div>
                    <div class="code-block" style="border-radius:0;border-top:1px solid #333;"><span class="comment">// â”€â”€ TestNoSetters.java â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="keyword">public class</span> <span class="cls">TestNoSetters</span> {
    <span class="keyword">public static void</span> <span class="method">main</span>(<span class="type">String</span>[] args) {
        <span class="cls">Student</span> ali = <span class="keyword">new</span> <span class="cls">Student</span>(<span class="number">1001</span>, <span class="string">"Ali"</span>, <span class="number">20</span>);

        System.out.<span class="method">println</span>(<span class="string">"id   = "</span> + ali.<span class="method">getId</span>());   <span class="comment">// 1001</span>
        System.out.<span class="method">println</span>(<span class="string">"name = "</span> + ali.<span class="method">getName</span>()); <span class="comment">// "Ali"</span>
        System.out.<span class="method">println</span>(<span class="string">"age  = "</span> + ali.<span class="method">getAge</span>());  <span class="comment">// 20</span>

        <span class="comment">// âŒ Compile error â€” setAge() does not exist!</span>
        <span class="comment">// ali.setAge(21);  â†’ ERROR: cannot find symbol</span>

        <span class="comment">// âœ… Object cannot be changed after creation â€” looks immutable!</span>
    }
}</div>
                </div>
            </div>

            <!-- Step 3 -->
            <div class="analogy-box" style="margin-top:30px;">
                <div class="analogy-title">ğŸ« Step 3 â€” The Professor's Trick: Making Fields <code>public</code></div>
                <div class="dialogue">
                    <div class="dialogue-item professor"><div class="dialogue-avatar avatar-prof">ğŸ‘¨â€ğŸ«</div><div class="dialogue-bubble"><div class="dialogue-speaker">Professor</div>Good! But wait â€” what if I change the access modifier of the data fields from <code>private</code> to <code>public</code>? There are still no setters. Is it still immutable?</div></div>
                    <div class="dialogue-item student"><div class="dialogue-avatar avatar-student">ğŸ™‹</div><div class="dialogue-bubble"><div class="dialogue-speaker">Student</div>Oh! ğŸ˜® If the fields are <code>public</code>, anyone can write <code>ali.age = 99</code> directly â€” no setter needed! The fields <strong>must stay <code>private</code></strong>!</div></div>
                    <div class="dialogue-item professor"><div class="dialogue-avatar avatar-prof">ğŸ‘¨â€ğŸ«</div><div class="dialogue-bubble"><div class="dialogue-speaker">Professor</div>Exactly! âœ… So we now have <strong>Rule 1</strong> and <strong>Rule 2</strong> â€” all fields must be <code>private</code>, and there must be no setters.</div></div>
                </div>
            </div>
            <div class="collapsible-code">
                <div class="code-header" onclick="toggleCode(this)"><span>ğŸ“„ Student.java &nbsp;â€”&nbsp; Version 3: public fields break immutability âŒ</span><button class="toggle-btn">â–¼ Show Code</button></div>
                <div class="code-collapse cc-hidden">
                    <div class="code-block"><span class="keyword">public class</span> <span class="cls">Student</span> {
    <span class="comment">// âŒ BAD: public fields â€” anyone can change them directly!</span>
    <span class="keyword">public int</span>    id;
    <span class="keyword">public</span> <span class="type">String</span> name;
    <span class="keyword">public int</span>    age;

    <span class="keyword">public</span> <span class="method">Student</span>(<span class="keyword">int</span> id, <span class="type">String</span> name, <span class="keyword">int</span> age) {
        <span class="keyword">this</span>.id   = id;
        <span class="keyword">this</span>.name = name;
        <span class="keyword">this</span>.age  = age;
    }
    <span class="keyword">public int</span>    <span class="method">getId</span>()   { <span class="keyword">return</span> id;   }
    <span class="keyword">public</span> <span class="type">String</span> <span class="method">getName</span>() { <span class="keyword">return</span> name; }
    <span class="keyword">public int</span>    <span class="method">getAge</span>()  { <span class="keyword">return</span> age;  }
}</div>
                    <div class="code-block" style="border-radius:0;border-top:1px solid #333;"><span class="comment">// â”€â”€ TestPublicFields.java â€” public fields are dangerous!</span>
<span class="keyword">public class</span> <span class="cls">TestPublicFields</span> {
    <span class="keyword">public static void</span> <span class="method">main</span>(<span class="type">String</span>[] args) {
        <span class="cls">Student</span> ali = <span class="keyword">new</span> <span class="cls">Student</span>(<span class="number">1001</span>, <span class="string">"Ali"</span>, <span class="number">20</span>);

        <span class="comment">// âŒ Direct field access â€” no setter needed, still modifiable!</span>
        ali.age  = <span class="number">99</span>;
        ali.name = <span class="string">"Hacked!"</span>;

        System.out.<span class="method">println</span>(ali.name); <span class="comment">// "Hacked!" â€” NOT immutable!</span>
        System.out.<span class="method">println</span>(ali.age);  <span class="comment">// 99       â€” NOT immutable!</span>
    }
}</div>
                </div>
            </div>
            <div class="important-box">
                <div class="important-box-title">ğŸ“Œ Two Rules Established So Far</div>
                <div class="rules-list" style="margin-top:12px;">
                    <div class="rule-item"><div class="rule-badge">1</div><div class="rule-content"><div class="rule-title">All data fields must be <code>private</code></div><div class="rule-desc">Public fields let any code modify them directly â€” no setter needed.</div></div></div>
                    <div class="rule-item"><div class="rule-badge">2</div><div class="rule-content"><div class="rule-title">No mutator (setter) methods</div><div class="rule-desc">Setters allow changing field values after construction.</div></div></div>
                </div>
            </div>
        </div>

        <!-- â•â• S3 â•â• -->
        <div class="section" id="s3">
            <div class="section-title"><div class="section-number">3</div>The Three Rules for an Immutable Class</div>
            <div class="narrative">
                <p>The professor then added an <strong>array of marks</strong> to the <code>Student</code> class and showed that even with two rules satisfied, the object can still be modified. This leads to the discovery of the <strong>third and most surprising rule</strong>.</p>
            </div>

            <!-- Step 4 -->
            <div class="analogy-box">
                <div class="analogy-title">ğŸ« Step 4 â€” Professor Adds a Marks Array</div>
                <div class="dialogue">
                    <div class="dialogue-item professor"><div class="dialogue-avatar avatar-prof">ğŸ‘¨â€ğŸ«</div><div class="dialogue-bubble"><div class="dialogue-speaker">Professor</div>Now I will add a new data field: <code>marks</code>, which is an <code>int[]</code> array. There are no setters, and the field is <code>private</code>. I add a getter that returns the marks. My question â€” is this class <strong>immutable</strong>?</div></div>
                    <div class="dialogue-item student"><div class="dialogue-avatar avatar-student">ğŸ™‹</div><div class="dialogue-bubble"><div class="dialogue-speaker">Student</div>Yes, Professor! Both rules are satisfied: all fields are <code>private</code>, and there are no setters. It must be immutable!</div></div>
                    <div class="dialogue-item professor"><div class="dialogue-avatar avatar-prof">ğŸ‘¨â€ğŸ«</div><div class="dialogue-bubble"><div class="dialogue-speaker">Professor</div>Let us seeâ€¦ I will print the marks <strong>before</strong> and <strong>after</strong> a small trick. Watch carefully! ğŸ‘€</div></div>
                </div>
            </div>
            <div class="collapsible-code">
                <div class="code-header" onclick="toggleCode(this)"><span>ğŸ“„ Student.java &nbsp;â€”&nbsp; Version 4: private, no setters, marks array added</span><button class="toggle-btn">â–¼ Show Code</button></div>
                <div class="code-collapse cc-hidden">
                    <div class="code-block"><span class="keyword">public class</span> <span class="cls">Student</span> {
    <span class="keyword">private int</span>    id;
    <span class="keyword">private</span> <span class="type">String</span> name;
    <span class="keyword">private int</span>    age;
    <span class="keyword">private int</span>[]  marks;  <span class="comment">// NEW: array of exam marks</span>

    <span class="keyword">public</span> <span class="method">Student</span>(<span class="keyword">int</span> id, <span class="type">String</span> name, <span class="keyword">int</span> age, <span class="keyword">int</span>[] marks) {
        <span class="keyword">this</span>.id    = id;
        <span class="keyword">this</span>.name  = name;
        <span class="keyword">this</span>.age   = age;
        <span class="keyword">this</span>.marks = marks;
    }
    <span class="keyword">public int</span>    <span class="method">getId</span>()   { <span class="keyword">return</span> id;    }
    <span class="keyword">public</span> <span class="type">String</span> <span class="method">getName</span>() { <span class="keyword">return</span> name;  }
    <span class="keyword">public int</span>    <span class="method">getAge</span>()  { <span class="keyword">return</span> age;   }

    <span class="comment">// âš ï¸ Returns the ACTUAL array reference â€” this is the problem!</span>
    <span class="keyword">public int</span>[]  <span class="method">getMarks</span>() { <span class="keyword">return</span> marks; }

    <span class="keyword">public void</span> <span class="method">printExam</span>(<span class="keyword">int</span> index) {
        System.out.<span class="method">println</span>(<span class="string">"Exam "</span> + (index + <span class="number">1</span>) + <span class="string">": "</span> + marks[index]);
    }
}</div>
                </div>
            </div>

            <!-- Step 5 -->
            <div class="analogy-box" style="margin-top:20px;">
                <div class="analogy-title">ğŸ« Step 5 â€” The Professor's Trick: Exploiting the Reference</div>
                <div class="dialogue">
                    <div class="dialogue-item professor"><div class="dialogue-avatar avatar-prof">ğŸ‘¨â€ğŸ«</div><div class="dialogue-bubble"><div class="dialogue-speaker">Professor</div>I create an object for Ali, then I call <code>getMarks()</code> and store the result in a temporary variable. Then I change the second element through that variable. Let us print the marks before and afterâ€¦</div></div>
                </div>
            </div>
            <div class="collapsible-code">
                <div class="code-header" onclick="toggleCode(this)"><span>ğŸ“„ TestExploit.java &nbsp;â€”&nbsp; âŒ Modifying a "no-setter" object through array reference</span><button class="toggle-btn">â–¼ Show Code</button></div>
                <div class="code-collapse cc-hidden">
                    <div class="code-block"><span class="keyword">public class</span> <span class="cls">TestExploit</span> {
    <span class="keyword">public static void</span> <span class="method">main</span>(<span class="type">String</span>[] args) {
        <span class="keyword">int</span>[] exams = {<span class="number">90</span>, <span class="number">85</span>, <span class="number">92</span>};
        <span class="cls">Student</span> ali = <span class="keyword">new</span> <span class="cls">Student</span>(<span class="number">1001</span>, <span class="string">"Ali"</span>, <span class="number">20</span>, exams);

        System.out.<span class="method">println</span>(<span class="string">"=== BEFORE ==="</span>);
        ali.<span class="method">printExam</span>(<span class="number">0</span>);  <span class="comment">// Exam 1: 90</span>
        ali.<span class="method">printExam</span>(<span class="number">1</span>);  <span class="comment">// Exam 2: 85</span>
        ali.<span class="method">printExam</span>(<span class="number">2</span>);  <span class="comment">// Exam 3: 92</span>

        <span class="comment">// ğŸ’¥ getMarks() returns the ACTUAL internal array reference!</span>
        <span class="keyword">int</span>[] temp = ali.<span class="method">getMarks</span>();
        temp[<span class="number">1</span>] = <span class="number">0</span>;  <span class="comment">// Changed ali's internal marks through the reference!</span>

        System.out.<span class="method">println</span>(<span class="string">"=== AFTER (no setter was called!) ==="</span>);
        ali.<span class="method">printExam</span>(<span class="number">0</span>);  <span class="comment">// Exam 1: 90</span>
        ali.<span class="method">printExam</span>(<span class="number">1</span>);  <span class="comment">// Exam 2: 0  â† CHANGED! ğŸ˜±</span>
        ali.<span class="method">printExam</span>(<span class="number">2</span>);  <span class="comment">// Exam 3: 92</span>
    }
}</div>
                </div>
            </div>
            <div class="important-box" style="margin-top:16px;">
                <div class="important-box-title">ğŸ˜± Surprise! The object was modified â€” without any setter!</div>
                <p>The student's mark changed from <strong>85 â†’ 0</strong>, even though there are no setter methods and all fields are <code>private</code>. Because <code>getMarks()</code> returned the <em>reference to the real internal array</em>. The caller used that reference to directly write into the array's memory.</p>
            </div>

            <!-- Step 6: Third rule discovered -->
            <div class="analogy-box" style="margin-top:20px;">
                <div class="analogy-title">ğŸ« Step 6 â€” Discovering the Third Rule</div>
                <div class="dialogue">
                    <div class="dialogue-item professor"><div class="dialogue-avatar avatar-prof">ğŸ‘¨â€ğŸ«</div><div class="dialogue-bubble"><div class="dialogue-speaker">Professor</div>So â€” the two rules were satisfied. All data fields are <code>private</code>, and there are no setters. But the object was still modified! What do you think? What is missing? What should the <strong>third rule</strong> be?</div></div>
                    <div class="dialogue-item student"><div class="dialogue-avatar avatar-student">ğŸ™‹</div><div class="dialogue-bubble"><div class="dialogue-speaker">Smart Student</div>Yes! I got it! When the getter returns the array, it returns the <em>real reference</em> â€” so I can reach inside the object and change the contents through that reference. The third rule must be: <strong>no getter should return a reference to a mutable object!</strong></div></div>
                    <div class="dialogue-item professor"><div class="dialogue-avatar avatar-prof">ğŸ‘¨â€ğŸ«</div><div class="dialogue-bubble"><div class="dialogue-speaker">Professor</div>ğŸ‘ğŸ‘ğŸ‘ Excellent! Absolutely correct! Everyone, give him a round of applause! Now we have <strong>three rules</strong> for an immutable class.</div></div>
                </div>
            </div>

            <!-- Step 7: What is a mutable object? -->
            <div class="analogy-box" style="margin-top:20px;">
                <div class="analogy-title">ğŸ« Step 7 â€” "But Professor, what do you mean by a <em>mutable</em> object?"</div>
                <div class="dialogue">
                    <div class="dialogue-item student"><div class="dialogue-avatar avatar-student">ğŸ™‹</div><div class="dialogue-bubble"><div class="dialogue-speaker">Student</div>Professor, I understand the rule â€” but what exactly do you mean by "a getter that returns a reference to a <em>mutable</em> object"? For example, <code>getName()</code> also returns a reference to a <code>String</code>. Is that a problem too?</div></div>
                    <div class="dialogue-item professor"><div class="dialogue-avatar avatar-prof">ğŸ‘¨â€ğŸ«</div><div class="dialogue-bubble"><div class="dialogue-speaker">Professor</div>Great question! Let us think about it. <code>getName()</code> returns a <code>String</code>. Now â€” is <code>String</code> mutable or immutable?</div></div>
                    <div class="dialogue-item student"><div class="dialogue-avatar avatar-student">ğŸ™‹</div><div class="dialogue-bubble"><div class="dialogue-speaker">Student</div><code>String</code> is immutable! Once it is created, its characters cannot be changed.</div></div>
                    <div class="dialogue-item professor"><div class="dialogue-avatar avatar-prof">ğŸ‘¨â€ğŸ«</div><div class="dialogue-bubble"><div class="dialogue-speaker">Professor</div>Exactly! So even if <code>getName()</code> returns the reference to the internal <code>String</code>, the caller <strong>cannot</strong> change its value â€” because <code>String</code> has no method to modify its characters. It is safe to return. âœ…<br><br>But now â€” what if I change the type of <code>name</code> from <code>String</code> to <code>StringBuilder</code>? <code>StringBuilder</code> is <em>mutable</em> â€” it has methods like <code>.replace()</code> and <code>.delete()</code>. If <code>getName()</code> returns the reference to a <code>StringBuilder</code>, the caller can call those methods and <em>change the name</em> â€” even though there is no setter!</div></div>
                    <div class="dialogue-item student"><div class="dialogue-avatar avatar-student">ğŸ™‹</div><div class="dialogue-bubble"><div class="dialogue-speaker">Students</div>Ahhh! So the rule applies only when the returned type is itself a mutable object â€” like an array, a <code>StringBuilder</code>, or any class that can be changed after creation!</div></div>
                    <div class="dialogue-item professor"><div class="dialogue-avatar avatar-prof">ğŸ‘¨â€ğŸ«</div><div class="dialogue-bubble"><div class="dialogue-speaker">Professor</div>Perfect! ğŸ‰ Always ask yourself: <em>"Is the type I am returning mutable?"</em> If yes â€” return a copy. If no (like <code>String</code>, <code>int</code>, <code>double</code>) â€” it is safe to return directly.</div></div>
                </div>
            </div>
            <!-- Step 8: The fix -->
            <div class="analogy-box" style="margin-top:20px;">
                <div class="analogy-title">ğŸ« Step 8 â€” The Fix: Return a Defensive Copy</div>
                <div class="dialogue">
                    <div class="dialogue-item professor"><div class="dialogue-avatar avatar-prof">ğŸ‘¨â€ğŸ«</div><div class="dialogue-bubble"><div class="dialogue-speaker">Professor</div>Now â€” how do we fix our <code>Student</code> class with the marks array? We know we cannot just remove the getter â€” students need to read their marks. So what is the solution?</div></div>
                    <div class="dialogue-item student"><div class="dialogue-avatar avatar-student">ğŸ™‹</div><div class="dialogue-bubble"><div class="dialogue-speaker">Smart Student</div>Instead of returning the real array, create a <strong>new array</strong>, copy all the elements into it, and return that new array. The caller gets their own copy â€” if they change it, they change only their copy, and the original inside the student object is untouched!</div></div>
                    <div class="dialogue-item professor"><div class="dialogue-avatar avatar-prof">ğŸ‘¨â€ğŸ«</div><div class="dialogue-bubble"><div class="dialogue-speaker">Professor</div>ğŸ‘ğŸ‘ğŸ‘ Excellent! This technique is called a <strong>defensive copy</strong>. Let us write the correct immutable class now.</div></div>
                </div>
            </div>
            <div class="collapsible-code">
                <div class="code-header" onclick="toggleCode(this)"><span>ğŸ“„ ImmutableStudent.java &nbsp;â€”&nbsp; âœ… Truly immutable â€” all 3 rules satisfied</span><button class="toggle-btn">â–¼ Show Code</button></div>
                <div class="code-collapse cc-hidden">
                    <div class="code-block"><span class="keyword">public class</span> <span class="cls">ImmutableStudent</span> {
    <span class="keyword">private final int</span>    id;    <span class="comment">// âœ… Rule 1: private</span>
    <span class="keyword">private final</span> <span class="type">String</span> name;  <span class="comment">// âœ… String is already immutable</span>
    <span class="keyword">private final int</span>    age;
    <span class="keyword">private final int</span>[]  marks; <span class="comment">// âœ… Rule 1: private</span>

    <span class="keyword">public</span> <span class="method">ImmutableStudent</span>(<span class="keyword">int</span> id, <span class="type">String</span> name, <span class="keyword">int</span> age, <span class="keyword">int</span>[] marks) {
        <span class="keyword">this</span>.id    = id;
        <span class="keyword">this</span>.name  = name;
        <span class="keyword">this</span>.age   = age;
        <span class="keyword">this</span>.marks = marks.<span class="method">clone</span>(); <span class="comment">// defensive copy even at construction!</span>
    }

    <span class="comment">// âœ… Rule 2: No setters at all</span>
    <span class="keyword">public int</span>    <span class="method">getId</span>()   { <span class="keyword">return</span> id;   }
    <span class="keyword">public</span> <span class="type">String</span> <span class="method">getName</span>() { <span class="keyword">return</span> name; }
    <span class="keyword">public int</span>    <span class="method">getAge</span>()  { <span class="keyword">return</span> age;  }

    <span class="comment">// âœ… Rule 3: Return a COPY â€” not the real array reference</span>
    <span class="keyword">public int</span>[] <span class="method">getMarks</span>() {
        <span class="keyword">return</span> marks.<span class="method">clone</span>();  <span class="comment">// defensive copy â€” caller gets their own copy</span>
    }

    <span class="keyword">public void</span> <span class="method">printExam</span>(<span class="keyword">int</span> index) {
        System.out.<span class="method">println</span>(<span class="string">"Exam "</span> + (index + <span class="number">1</span>) + <span class="string">": "</span> + marks[index]);
    }
}</div>
                    <div class="code-block" style="border-radius:0;border-top:1px solid #333;"><span class="comment">// â”€â”€ TestImmutable.java â€” now the object is truly immutable â”€â”€â”€â”€</span>
<span class="keyword">public class</span> <span class="cls">TestImmutable</span> {
    <span class="keyword">public static void</span> <span class="method">main</span>(<span class="type">String</span>[] args) {
        <span class="cls">ImmutableStudent</span> ali = <span class="keyword">new</span> <span class="cls">ImmutableStudent</span>(
            <span class="number">1001</span>, <span class="string">"Ali"</span>, <span class="number">20</span>, <span class="keyword">new int</span>[]{<span class="number">90</span>, <span class="number">85</span>, <span class="number">92</span>}
        );

        System.out.<span class="method">println</span>(<span class="string">"=== BEFORE ==="</span>);
        ali.<span class="method">printExam</span>(<span class="number">0</span>);  <span class="comment">// Exam 1: 90</span>
        ali.<span class="method">printExam</span>(<span class="number">1</span>);  <span class="comment">// Exam 2: 85</span>
        ali.<span class="method">printExam</span>(<span class="number">2</span>);  <span class="comment">// Exam 3: 92</span>

        <span class="keyword">int</span>[] temp = ali.<span class="method">getMarks</span>();  <span class="comment">// gets a COPY</span>
        temp[<span class="number">1</span>] = <span class="number">0</span>;                   <span class="comment">// only modifies the copy</span>

        System.out.<span class="method">println</span>(<span class="string">"=== AFTER (attempted change) ==="</span>);
        ali.<span class="method">printExam</span>(<span class="number">0</span>);  <span class="comment">// Exam 1: 90  â† unchanged âœ…</span>
        ali.<span class="method">printExam</span>(<span class="number">1</span>);  <span class="comment">// Exam 2: 85  â† unchanged âœ…</span>
        ali.<span class="method">printExam</span>(<span class="number">2</span>);  <span class="comment">// Exam 3: 92  â† unchanged âœ…</span>
    }
}</div>
                </div>
            </div>


            <!-- Conclusion -->
            <div class="key-concept" style="margin-top:24px;">
                <div class="key-concept-title">ğŸ“Œ Conclusion â€” What Makes an Object Immutable?</div>
                <p>An object is <strong>immutable</strong> when its content cannot be changed after it is created. Any class that meets all of the following rules â€” any object created from it is immutable:</p>
                <div class="rules-list" style="margin-top:16px;">
                    <div class="rule-item"><div class="rule-badge">1</div><div class="rule-content"><div class="rule-title">All data fields must be <code>private</code></div><div class="rule-desc">Public fields let any code modify them directly â€” even without setters.</div></div></div>
                    <div class="rule-item"><div class="rule-badge">2</div><div class="rule-content"><div class="rule-title">No mutator (setter) methods</div><div class="rule-desc">Setters allow changing field values after construction.</div></div></div>
                    <div class="rule-item"><div class="rule-badge">3</div><div class="rule-content"><div class="rule-title">No getter that returns a reference to a mutable object</div><div class="rule-desc">If a getter returns the direct reference to an array or mutable object, the caller can modify the contents â€” even without a setter. Return a <strong>defensive copy</strong> instead.</div></div></div>
                </div>
            </div>
            <div class="key-concept">
                <div class="key-concept-title">ğŸ’¡ What about <code>final</code> on an array?</div>
                <p><code>final</code> on a reference variable means the <strong>reference cannot be reassigned</strong>. But it does <strong>NOT</strong> prevent modifying the array's <em>contents</em> â€” <code>marks[1] = 0</code> still compiles and runs. So <code>final</code> alone is not enough â€” you still need defensive copies in your getter!</p>
            </div>
        </div>

    </div><!-- /content -->

    <div class="nav-buttons">
        <a href="../module04-objects-and-classes/03-static-visibility-arrays.html" class="nav-btn prev">â† Module 04: Static &amp; Visibility</a>
        <a href="../index.html" class="nav-btn home">ğŸ  Home</a>
        <a href="02-object-relationships.html" class="nav-btn next">Part 2: Object Relationships â†’</a>
    </div>

</div><!-- /container -->
<script>
    function toggleCode(headerEl) {
        const collapse = headerEl.closest('.collapsible-code').querySelector('.code-collapse');
        const btn      = headerEl.querySelector('.toggle-btn');
        const hidden   = collapse.classList.contains('cc-hidden');
        collapse.classList.toggle('cc-hidden', !hidden);
        btn.textContent = hidden ? 'â–² Hide Code' : 'â–¼ Show Code';
    }
</script>
</body>
</html>
